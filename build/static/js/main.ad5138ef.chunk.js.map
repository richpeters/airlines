{"version":3,"sources":["loading.svg","components/availableFlightsContext.js","components/flightContext.js","components/BackButton.jsx","components/FlightDetails.jsx","components/FlightControls.jsx","components/FlightGlobe.jsx","components/Loading.jsx","components/Flight.jsx","components/NotFound.jsx","components/FlightSelect.jsx","App.js","index.js"],"names":["module","exports","AvailableFlightContext","React","createContext","FlightContext","BackButton","className","to","FlightDetails","useContext","departure","arrival","airline","flight","live","holder_class","name","icao","airport","iata","date","estimated","format","delay","altitude","direction","speed_horizontal","FlightControls","props","id","flightData","exact","FlightGlobe","flightContext","markers","latitude","longitude","markerOptions","activeScale","enableTooltip","exitAnimationDuration","focus","focusOptions","animationDuration","distanceRadiusScale","easingFunction","enableDefocus","globeOptions","enableGlow","cloudsOpacity","Loading","src","LoadingSVG","alt","Flight","state","redirect","loaded","this","match","params","axios","then","response","data","setState","catch","error","Provider","value","Fragment","path","render","Component","NotFound","FlightSelect","flightsContext","AvailableFlightsContext","aria-hidden","map","key","App","flights","filter","f","message","renderError","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.ad5138ef.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.90cd3d0f.svg\";","import React from 'react';\n\nconst AvailableFlightContext = React.createContext()\n\nexport default AvailableFlightContext;","import React from 'react';\n\nconst FlightContext = React.createContext()\n\nexport default FlightContext;","import React from 'react';\nimport { Link } from 'react-router-dom';\n\n\nconst BackButton = () => {\n    return (  \n        <div className=\"button-row\">\n            <Link to='/' className=\"button\">Back to list</Link>\n        </div>\n    );\n}\n \nexport default BackButton;","import React, { useContext } from 'react';\nimport FlightContext from './flightContext';\nimport BackButton from './BackButton';\nimport Moment from 'react-moment';\n\n\nconst FlightDetails = () => {\n    const { departure, arrival, airline, flight, live } = useContext(FlightContext);\n    const holder_class = !live ? 'border-top' : '';\n\n    return ( \n        <div className={`flight-details__holder ${holder_class}`}>\n            <BackButton />\n            <div className=\"flight-details\">\n                <div className=\"flight-details__overview\">\n                    <h3>{airline.name} {flight.icao}</h3>\n                    <p className=\"meta\">{departure.airport} ({departure.iata}) - {arrival.airport} ({arrival.iata})</p>\n                </div>\n                \n                <div className=\"flight-details__arrival\">\n                    <span className=\"uppercase\">Estimated arrival</span>\n                    <p className=\"big\"><Moment date={arrival.estimated} format='HH:MM' /></p>\n                    <p className=\"delay\">Delay: {arrival.delay} minute(s)</p>   \n                </div>\n\n                {live &&\n                    <div className=\"flight-details__meta\">\n                        <h4>Live data <span className=\"live\"></span></h4>\n                        <p>Current altitude: <strong>{live.altitude} metres</strong></p>\n                        <p>Current direction: <strong>{live.direction} degrees</strong></p>\n                        <p>Current speed: <strong>{live.speed_horizontal} KM/h</strong></p>\n                    </div>\n                }\n            </div>\n        </div>\n    )\n}\n    \nexport default FlightDetails;","import React from 'react';\nimport { NavLink } from 'react-router-dom';\n\nconst FlightControls = (props) => {\n    const { airport, id } = props.flight;\n \n    // Only need to show this if there is live data, else the globe isn't available\n    if (props.flightData.live) {\n        return ( \n            <nav className=\"flight-detail__controls\">\n                <ul>\n                    <li>\n                        <NavLink to={`/flight/${airport}/${id}`} exact>View details</NavLink>\n                    </li>\n                    <li>\n                        <NavLink to={`/flight/${airport}/${id}/globe`} exact>View flight on globe</NavLink>\n                    </li>\n                </ul>\n            </nav>\n         );\n    }\n\n    return null\n}\n \nexport default FlightControls;","import React, { useContext } from 'react';\nimport FlightContext from './flightContext';\nimport BackButton from './BackButton';\nimport ReactGlobe from 'react-globe';\n\n\nconst FlightGlobe = () => {\n    const flightContext = useContext(FlightContext);\n    const { airline, flight, live } = flightContext;\n\n    // Create marker with data\n    const markers = [\n        {\n            'color': 'red',\n            'coordinates': [\n                live.latitude,\n                live.longitude\n            ],\n            'value': 100\n        }\n    ]\n\n    const markerOptions = {\n        activeScale: 1,\n        enableTooltip: false,\n        exitAnimationDuration: 0\n    }\n\n    return ( \n        <div className=\"flight-globe\">\n            <div className=\"flight-globe__top-bar\">\n                <BackButton />\n                <div className=\"flight-globe__details\">\n                    <h3>{airline.name} {flight.icao}</h3>\n                    <p className=\"meta\">Current position: {live.latitude},{live.longitude}</p>   \n                    <p className=\"meta\">Current speed: {live.speed_horizontal} KM/h</p>   \n                </div>\n            </div>\n            <ReactGlobe \n                className='flight-globe'\n                markers={markers} \n                markerOptions={markerOptions} \n                focus={[live.latitude, live.longitude]}\n                focusOptions={{\n                    animationDuration: 5000,\n                    distanceRadiusScale: 2,\n                    easingFunction: ['Quadratic', 'InOut'],\n                    enableDefocus: false,\n                }}\n                globeOptions={{\n                    enableGlow: false,\n                    cloudsOpacity: 1\n                }}\n            />\n        </div>                    \n    )\n}\n \nexport default FlightGlobe;","import React from 'react';\nimport LoadingSVG from '../loading.svg';\n\nconst Loading = () => {\n    return (  \n        <img className='loading' src={LoadingSVG} alt=\"loading\" />\n    );\n}\n \nexport default Loading;","import axios from 'axios';\n\nimport React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport FlightContext from './flightContext';\nimport FlightDetails from './FlightDetails'\nimport FlightControls from './FlightControls';\nimport FlightGlobe from './FlightGlobe'\nimport Loading from './Loading';\n\n\nclass Flight extends Component {\n    state = { \n        redirect: false,\n        loaded: false,\n        flightData: null\n    }\n\n    componentWillMount() {\n        // Call server with departing airport and ICAO\n        const { airport, id } = this.props.match.params;\n        const api_url = 'https://g4xyr7m9h6.execute-api.us-east-1.amazonaws.com/dev/flights'\n\n        axios(`${api_url}/${airport}/${id}`).then(response => {\n            // Always returns a list so if it's there take the first result\n            if (response.data) {\n                this.setState({\n                    flightData: response.data.data[0],\n                    loaded: true\n                });\n            }\n        }).catch(error => {\n            // We want to push traffic to the not-found route if this fails\n            this.setState({ \n                redirect: true,\n                loaded: true\n            })\n        });\n    }\n\n    render() { \n        const { redirect, loaded, flightData } = this.state;\n\n        if (redirect) {\n            return <Redirect to=\"/not-found\" />;\n        }\n\n        if (!loaded) {\n            return <Loading />\n        }\n\n        return ( \n            <div className=\"flight-detail__panel\">\n                <FlightContext.Provider value={flightData}>\n                    {loaded && flightData &&\n                        <React.Fragment>\n                            <FlightControls flight={this.props.match.params} flightData={flightData} />\n                            <Switch>\n                                <Route path=\"/flight/:airport/:id/globe\" render={() => <FlightGlobe />} /> \n                                <Route path=\"/flight/:airport/:id/\" render={() => <FlightDetails />} />\n                            </Switch>\n                        </React.Fragment>\n                    }\n                </FlightContext.Provider>\n            </div>\n        );\n    }\n}\n \nexport default Flight;","import React from 'react';\nimport BackButton from './BackButton';\n\nconst NotFound = () => {\n    return ( \n        <React.Fragment>\n            <BackButton />\n            <h3>Flight not found</h3>\n            <p>Please try again</p>   \n        </React.Fragment>\n    );\n}\n \nexport default NotFound;","import React, { useContext } from 'react';\nimport AvailableFlightsContext from  './availableFlightsContext';\nimport Moment from 'react-moment';\nimport { NavLink } from 'react-router-dom';\n\nconst FlightSelect = () => {\n    const flightsContext = useContext(AvailableFlightsContext);\n\n    return ( \n        <nav className='flight-link-panel'>\n            <div className=\"flight-link__headers\" aria-hidden=\"true\">\n                <p className=\"flight-link__header\">Flight</p>\n                <div>\n                    <p className=\"flight-link__header flight-link__headers__depart\">Depart</p>\n                    <p className=\"flight-link__header\">Arrival</p>\n                </div>\n                <p className=\"flight-link__header\">Dest.</p>\n            </div>\n\n            <div className=\"flight-link-panel__options\">\n                {flightsContext.map(flight => (\n                    <NavLink \n                        to={`/flight/${flight.departure.icao}/${flight.flight.icao}`}\n                        key={`${flight.departure.icao}-${flight.flight.icao}`} \n                        className=\"flight-link\"\n                    >\n                        <div className=\"flight-link__identifier\">\n                            <strong>{flight.flight.icao} {flight.live && <span className=\"live\">live</span>}</strong>\n                            <span>{flight.airline.name}</span>\n                        </div>\n                        <div className=\"flight-link__times\">\n                            <div className=\"flight-link__times__departure\">\n                                <Moment date={flight.departure.estimated} format='HH:MM' />\n                                <span> / <strong className=\"delay\">{flight.departure.delay}&nbsp;min(s)</strong></span>\n                            </div>\n                            <div className=\"flight-link__times__arrival\">\n                                <Moment date={flight.arrival.estimated} format='HH:MM' />\n                                <span> / <strong className=\"delay\">{flight.arrival.delay}&nbsp;min(s)</strong></span>\n                            </div>\n                        </div>\n                        <div className=\"flight-link__destination\">\n                            <strong>{flight.arrival.iata}</strong>\n                            <span>{flight.arrival.airport}</span>\n                        </div>\n                    </NavLink>\n                ))}\n            </div>\n        </nav>\n    );\n}\n \nexport default FlightSelect;","import axios from 'axios';\nimport React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport AvailableFlightContext from './components/availableFlightsContext';\nimport Flight from './components/Flight';\nimport NotFound from './components/NotFound';\nimport Loading from './components/Loading';\nimport FlightSelect from './components/FlightSelect';\n\n// Styles \nimport './styles/styles.scss';\n\n\nclass App extends Component {\n    state = {\n        // flights: flightData.filter(f => f.flight.icao != null),\n        error: null,\n        flights: null,\n        loaded: false\n    }\n\n    componentDidMount() {\n        // Call server\n        const api_url = 'https://g4xyr7m9h6.execute-api.us-east-1.amazonaws.com/dev/flights';\n\n        axios(api_url).then(response => {\n            //We only want flights that have a registered ICAO\n            const flights = response.data.data.filter(f => f.flight.icao != null);\n            \n            this.setState({flights: flights, loaded: true});\n        }).catch(error => {\n            this.setState({error: error.message, loaded: true});\n        })\n    }\n\n    renderError() {\n        if (this.state.error) return <p>{this.state.error}</p> \n        return null;\n    }\n\n\n    render() {\n        const { error, flights, loaded } = this.state;\n\n        if (!loaded) {\n            return <Loading />\n        }\n\n        return (\n            <div className=\"content\">\n                <div className=\"brand\">\n                    <h1>The <em>delayed</em> FlightTracker</h1>\n                    <p>Your source of currently delayed flights!</p>\n                </div>\n                {this.renderError()}\n                {!error && flights &&\n                    <AvailableFlightContext.Provider value={flights}>\n                        <Switch>    \n                            <Route path=\"/flight/:airport/:id\" component={Flight} />    \n                            <Route path=\"/not-found\" component={NotFound} />    \n                            <Route path=\"/\" exact component={FlightSelect} />    \n                            <Redirect to=\"/not-found\" />\n                        </Switch>\n                    </AvailableFlightContext.Provider>\n                }\n            </div>\n        );\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom' ;\nimport App from './App.js';\n\n\nReactDOM.render(\n    <BrowserRouter>\n        <App/>\n    </BrowserRouter>, \n    document.getElementById('root')\n);"],"sourceRoot":""}